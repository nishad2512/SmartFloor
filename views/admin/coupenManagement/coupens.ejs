<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Admin - Coupon Management</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800;900&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#141414",
                        "background-light": "#f7f7f7",
                        "background-dark": "#191919",
                    },
                    fontFamily: {
                        display: ["Work Sans"],
                    },
                    borderRadius: {
                        DEFAULT: "0.25rem",
                        lg: "0.5rem",
                        xl: "0.75rem",
                        full: "9999px",
                    },
                },
            },
        };
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0,
                "opsz" 24;
        }

        .material-symbols-outlined.fill {
            font-variation-settings: "FILL" 1;
        }

        input,
        textarea {
            background-color: transparent;
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-[#141414] dark:text-white">
    <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <div class="flex min-h-screen">
            <aside
                class="w-64 flex-shrink-0 bg-white dark:bg-[#1f1f1f] border-r border-[#e0e0e0] dark:border-primary/20">
                <div class="flex h-full flex-col justify-between p-4">
                    <div class="flex flex-col gap-4">
                        <div class="flex gap-3 items-center px-3 py-2">
                            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
                                data-alt="Admin user avatar" style="
                                        background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuD7DCjpi4_9COoNXgK1RsmjaIr7Bn4K9bvURTtdza3b2a_pRsj8B5g4hKo0e3jDcPjj1q_sue_k1pOKr3h5yScn59ELo8nhJK7xEnjAyb5Fs6fMvLthyUoxn78cpWZhkuybMDdIjBWEFThu3WolBRO_2DaVq9QaJawfAUGFPdXDos_ZXaMZMCCwq7Mj_TsrmvRE1DDiu7dsIVPwcVTshHOmuS8ePCWTm1yF2G6JBcH9FFgbFFI_4dweSHjz3YhnN4r4NrEkXM8tjKw');
                                    "></div>
                            <div class="flex flex-col">
                                <h1 class="text-[#141414] dark:text-white text-base font-medium leading-normal">
                                    Admin
                                </h1>
                                <p class="text-[#757575] dark:text-gray-400 text-sm font-normal leading-normal">
                                    Flooring Inc.
                                </p>
                            </div>
                        </div>
                        <nav class="flex flex-col gap-2 mt-4">
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                                href="#">
                                <span class="material-symbols-outlined text-2xl">grid_view</span>
                                <p class="text-[#141414] dark:text-white text-sm font-medium leading-normal">
                                    Dashboard
                                </p>
                            </a>
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                                href="#">
                                <span class="material-symbols-outlined text-2xl">shopping_cart</span>
                                <p class="text-[#141414] dark:text-white text-sm font-medium leading-normal">
                                    Orders
                                </p>
                            </a>
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                                href="#">
                                <span class="material-symbols-outlined text-2xl">package_2</span>
                                <p class="text-[#141414] dark:text-white text-sm font-medium leading-normal">
                                    Products
                                </p>
                            </a>
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                                href="#">
                                <span class="material-symbols-outlined text-2xl">group</span>
                                <p class="text-[#141414] dark:text-white text-sm font-medium leading-normal">
                                    Customers
                                </p>
                            </a>
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                                href="#">
                                <span class="material-symbols-outlined text-2xl">monitoring</span>
                                <p class="text-sm font-medium leading-normal">
                                    Reports
                                </p>
                            </a>
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                                href="#">
                                <span class="material-symbols-outlined fill text-2xl">sell</span>
                                <p class="text-sm font-medium leading-normal">
                                    Offers
                                </p>
                            </a>
                            <a class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary text-white dark:bg-white dark:text-primary"
                                href="#">
                                <span class="material-symbols-outlined fill text-2xl">confirmation_number</span>
                                <p class="text-sm font-medium leading-normal">
                                    Coupons
                                </p>
                            </a>
                        </nav>
                    </div>
                    <div class="flex flex-col gap-1">
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-primary/10 dark:hover:bg-primary/30"
                            href="#">
                            <span class="material-symbols-outlined text-2xl">settings</span>
                            <p class="text-[#141414] dark:text-white text-sm font-medium leading-normal">
                                Settings
                            </p>
                        </a>
                    </div>
                </div>
            </aside>
            <main class="flex-1 p-6 lg:p-10">
                <div class="layout-content-container flex flex-col w-full max-w-7xl mx-auto">
                    <div class="flex flex-col gap-4 mb-6 sm:flex-row sm:items-center sm:justify-between">
                        <div class="flex flex-col gap-1">
                            <p
                                class="text-[#141414] dark:text-white text-4xl font-black leading-tight tracking-[-0.033em]">
                                Coupon Management
                            </p>
                            <p class="text-[#757575] dark:text-gray-400 text-base font-normal leading-normal">
                                Manage, edit, and create new coupons for
                                your store.
                            </p>
                        </div>
                        <a href="/admin/coupens/create"
                            class="flex items-center justify-center gap-2 rounded-lg bg-primary text-white px-5 py-2.5 font-medium hover:opacity-90 w-full sm:w-auto h-[46px]">
                            <span class="material-symbols-outlined">add</span>
                            <span>Create New Coupon</span>
                        </a>
                    </div>
                    <div
                        class="rounded-xl border border-[#e0e0e0] dark:border-primary/20 bg-white dark:bg-[#1f1f1f] overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="border-b border-[#e0e0e0] dark:border-primary/20">
                                <tr>
                                    <th class="px-6 py-4 font-medium text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Coupon Code
                                    </th>
                                    <th class="px-6 py-4 font-medium text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Discount Type
                                    </th>
                                    <th class="px-6 py-4 font-medium text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Value
                                    </th>
                                    <th class="px-6 py-4 font-medium text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Usage Limit
                                    </th>
                                    <th class="px-6 py-4 font-medium text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Expiration Date
                                    </th>
                                    <th class="px-6 py-4 font-medium text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Status
                                    </th>
                                    <th class="px-6 py-4 font-medium text-right text-[#757575] dark:text-gray-400 uppercase tracking-wider"
                                        scope="col">
                                        Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-[#e0e0e0] dark:divide-primary/20">
                                <% if (typeof coupens !=='undefined' && coupens.length> 0) { %>
                                    <% coupens.forEach(coupen=> { %>
                                        <tr class="hover:bg-primary/5 dark:hover:bg-primary/20">
                                            <td class="px-6 py-4 font-medium whitespace-nowrap">
                                                <%= coupen.code %>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <%= coupen.discountType==='percentage' ? 'Percentage' : 'Fixed Amount'
                                                    %>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <%= coupen.discountType==='percentage' ? coupen.discountValue + '%'
                                                    : 'â‚¹' + coupen.discountValue %>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <%= coupen.usageLimit ? coupen.usageLimit : 'Unlimited' %>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <%= new Date(coupen.expirationDate).toLocaleDateString() %>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <% if (coupen.isActive && new Date(coupen.expirationDate)> new Date()) {
                                                    %>
                                                    <span
                                                        class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">Active</span>
                                                    <% } else if (!coupen.isActive) { %>
                                                        <span
                                                            class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">Inactive</span>
                                                        <% } else { %>
                                                            <span
                                                                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">Expired</span>
                                                            <% } %>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-right">
                                                <a href="/admin/coupens/edit/<%= coupen._id %>"
                                                    class="inline-block p-1.5 rounded-md hover:bg-primary/10 dark:hover:bg-primary/30">
                                                    <span class="material-symbols-outlined text-lg">edit</span>
                                                </a>
                                                <a href="/admin/coupens/delete/<%= coupen._id %>"
                                                    class="inline-block p-1.5 rounded-md hover:bg-primary/10 dark:hover:bg-primary/30"
                                                    onclick="return confirm('Are you sure you want to delete this coupon?')">
                                                    <span class="material-symbols-outlined text-lg">delete</span>
                                                </a>
                                            </td>
                                        </tr>
                                        <% }); %>
                                            <% } else { %>
                                                <tr>
                                                    <td colspan="7"
                                                        class="px-6 py-4 text-center text-gray-500 dark:text-gray-400">
                                                        No coupons found.
                                                    </td>
                                                </tr>
                                                <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>
</body>

</html>